# API Contracts

**Feature**: Mental Health Assessment and Tracking Application
**Date**: 2025-10-15
**Contract Type**: Tauri Commands (Rust â†’ TypeScript via tauri-specta)

## Overview

This directory contains the API contract specifications for Tauri commands. The actual TypeScript types are auto-generated by tauri-specta from Rust command signatures, but this documentation provides the canonical reference for frontend developers.

## Contract Format

Tauri commands follow this pattern:

**Rust (Backend)**:
```rust
#[tauri::command]
#[specta::specta]  // Generates TypeScript types
pub async fn command_name(arg: Type) -> Result<ReturnType, String> {
    // Implementation
}
```

**TypeScript (Frontend)**:
```typescript
import { invoke } from '@tauri-apps/api/core';
import type { CommandName } from '$lib/bindings';  // Generated types

const result = await invoke<ReturnType>('command_name', { arg: value });
```

## Command Conventions

1. **Naming**: `verb_noun` pattern (e.g., `submit_assessment`, `get_mood_history`)
2. **Async**: All commands are async (return `Result<T, String>`)
3. **Errors**: Return `String` error messages (user-friendly)
4. **Serialization**: All types must implement `Serialize`, `Deserialize`, and `specta::Type`

## Type Generation

Types are generated automatically by running:
```bash
cd src-tauri
cargo test generate_types -- --exact
```

This generates `/src/lib/bindings.ts` which is imported by Svelte components.
